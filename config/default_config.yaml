# Processing settings
processing:
  epub_processor: "ebooklib"  # "ebooklib" (modern, native) or "pandoc" (legacy)
  pandoc_path: "pandoc"  # or full path (only used if epub_processor is "pandoc")
  temp_dir: "/tmp/epub2tts"
  max_parallel_jobs: 4

# Text processing
text_processing:
  processor_mode: "modern"  # "legacy" (regex), "modern" (spacy+nlp), "hybrid" (both)
  spacy_model: "en_core_web_sm"
  chunk_size: 4000
  chunk_overlap: 200

# Text cleaning (legacy settings, used in legacy/hybrid modes)
cleaning:
  remove_footnotes: true
  remove_page_numbers: true
  preserve_emphasis: true
  preserve_dialogue_marks: true
  add_pause_markers: true

# Chapter detection (enhanced with modern options)
chapters:
  detect_by_headings: true
  use_toc_when_available: true  # Use TOC from EbookLib for accurate boundaries
  min_words_per_chapter: 100
  max_words_per_chunk: 5000  # For very long chapters
  confidence_threshold: 0.6  # Minimum confidence for chapter detection

# TTS settings
tts:
  model: "kokoro"
  model_path: "./models/Kokoro-82M-8bit"
  voice: "bf_lily"
  speed: 1.0
  pitch: 1.0
  sample_rate: 22050
  output_format: "wav"  # or mp3

  # MLX-specific settings
  use_mlx: true
  quantization: false
  mlx_cache_dir: null

  # Performance settings
  batch_size: 1
  max_workers: 4

# VLM settings
image_description:
  enabled: true
  model: "gemma-3n-e4b"
  model_path: "./models/llava"
  api_url: "http://127.0.0.1:1234"
  max_description_length: 100
  include_context: true

  # Auto-loading settings
  auto_load_timeout: 10  # seconds to wait for model loading (was 30s)
  skip_if_not_loaded: false  # if true, skip image processing if model won't load

# Output settings
output:
  text_format: "plain"  # plain, ssml, json
  save_intermediate: true
  create_metadata: true
  generate_toc: true

# Logging
logging:
  level: "INFO"
  file: "./logs/epub2tts.log"
  rotate_size: "10MB"
  keep_days: 7

# Terminal UI settings
ui:
  mode: "classic"  # "classic" or "split-window"
  window_height: 20
  update_frequency: 0.1  # seconds
  show_stats: true
  show_progress_bars: true
  show_recent_activity: true
  recent_activity_lines: 3

  # Color scheme
  colors:
    progress_complete: "green"
    progress_incomplete: "white"
    error: "red"
    warning: "yellow"
    info: "blue"
    success: "green"
    processing: "cyan"